<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.5.0_09) on Wed Nov 02 19:19:15 GMT 2016 -->
<TITLE>
SMimeEncrypted (IAIK-CMS 5.1 API Documentation)
</TITLE>

<META NAME="keywords" CONTENT="iaik.smime.SMimeEncrypted class">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="SMimeEncrypted (IAIK-CMS 5.1 API Documentation)";
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../iaik/smime/SMimeContent.html" title="class in iaik.smime"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../iaik/smime/SMimeException.html" title="class in iaik.smime"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../index.html?iaik/smime/SMimeEncrypted.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="SMimeEncrypted.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#fields_inherited_from_class_iaik.cms.EnvelopedDataStream">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
iaik.smime</FONT>
<BR>
Class SMimeEncrypted</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../resources/inherit.gif" ALT="extended by "><A HREF="../../iaik/cms/EnvelopedDataStream.html" title="class in iaik.cms">iaik.cms.EnvelopedDataStream</A>
      <IMG SRC="../../resources/inherit.gif" ALT="extended by "><B>iaik.smime.SMimeEncrypted</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD><A HREF="../../iaik/cms/ContentStream.html" title="interface in iaik.cms">ContentStream</A>, <A HREF="http://javadoc.iaik.tugraz.at/iaik_jce/current/iaik/utils/EOFListener.html" title="class or interface in iaik.utils">EOFListener</A>, java.util.EventListener</DD>
</DL>
<HR>
<DL>
<DT><PRE>public class <B>SMimeEncrypted</B><DT>extends <A HREF="../../iaik/cms/EnvelopedDataStream.html" title="class in iaik.cms">EnvelopedDataStream</A></DL>
</PRE>

<P>
This class represents the "CMS EnvelopedData object carrying" part of a S/MIME
 message.
 <p>
 This class extends the <A HREF="../../iaik/cms/EnvelopedDataStream.html" title="class in iaik.cms"><CODE>EnvelopedDataStream</CODE></A>
 class of the <code>iaik.cms</code> package and may be used for creating and parsing 
 CMS (<a href = "http://www.ietf.org/rfc/rfc5652.txt" target="_blank"> RFC 5652</a>) EnvelopedData
 objects that are (to be) wrapped into a ContentInfo structure.
 <p>
 The steps for creating a SMimeEncrypted object and writing it to a stream may
 be summarized as follows (note that in this example we use Triple DES as 
 content encryption algorithm and RSA key transport for encrypting the
 content-encryption key; however, an application may wish to use any
 other content encryption algorithm supported by a cryptographic provider 
 installed, and any other key management technique allowed (e.g. ESDH key
 agreement):
 <ol>
  <li>Create a new SMimeEncrypted by specifying the data to be enveloped,
      the content encryption algorithm, and - if required - the key lengh, e.g.:
      <pre>
      InputStream data_stream = ...;
      AlgorithmID contentEA = (AlgorithmID)AlgorithmID.des_EDE3_CBC.clone();
      int keyLength = 192;
      SMimeEncrypted sme = new SMimeEncryoted(data_stream, contentEA, keyLength);
      </pre>
      This step also will create the symmetric content encryption key.
  <li>Add any intended recipient by calling the <A HREF="../../iaik/smime/SMimeEncrypted.html#addRecipient(iaik.x509.X509Certificate, iaik.asn1.structures.AlgorithmID)"><CODE>addRecipient</CODE></A> method thereby
      specifying the particular recipient certificate and the key encryption
      algorithm to be used for encrypting the symmetric content encryption
      key with the recipient public key obtained from the supplied certificate, e.g.:
      <pre>
      // the certificate of the recipient
      X509Certificate recipientCert = ...;
      // the sender wants to be able to decrypt the message, too
      X509Certificate senderCert = ...;
      sme.addRecipient(recipientCert, AlgorithmID.rsaEncryption);
      sme.addRecipient(senderCert, AlgorithmID.rsaEncryption);
      </pre>
  <li>Finally call the <A HREF="../../iaik/smime/SMimeEncrypted.html#writeTo(java.io.OutputStream)"><CODE>writeTo</CODE></A> method for wrapping
      the EnvelopedData object into a ContentInfo and writing it BER encoded to an
      output stream thereby actually performing the content encryption by piping the
      data through a cipher stream:
      <pre>
      OutputStrem os = ...;
      sme.writeTo(os);
      </pre>
 </ol>
 On the receiving side, the recipient first <A HREF="../../iaik/smime/SMimeEncrypted.html#SMimeEncrypted(java.io.InputStream)"><CODE>creates</CODE></A>
 a new <code>SMimeEncrypted</code> object from an input stream supplying the BER encoded
 message, subsequently <A HREF="../../iaik/smime/SMimeEncrypted.html#decryptSymmetricKey(java.security.Key, int)"><CODE>decrypts</CODE></A> the
 encrypted symmetric content encryption key with her/his (private) key, and finally <A HREF="../../iaik/cms/EnvelopedDataStream.html#getInputStream()"><CODE>gets</CODE></A> and reads the data holding input stream which is decrypted
 during the read operation, e.g.:
 <pre>
 InputStream enveloped_stream = ...;
 SMimeEncrypted sme = new SMimeEncrypted(encrypted_stream);
 //recipient has index 0
 sme.decryptSymmetricKey(privateKey, 0);
 //get and read the data
 InputStream data_stream = sme.getInputStream();
 byte[] buf = new byte[1024];
 int r;
 while ((r = data_is.read(buf)) > 0) {
   // do something useful
 }
 </pre>
 The <A HREF="../../iaik/smime/SMimeEncrypted.html#decryptSymmetricKey(java.security.Key, int)"><CODE>decryptSymmetricKey</CODE></A> method used
 in the sample above requires that the recipient knows the index of the
 RecipientInfo that belongs to her/his key. Alternatively you may use
 the <A HREF="../../iaik/smime/SMimeEncrypted.html#decryptSymmetricKey(java.security.Key, iaik.x509.X509Certificate)"><CODE>recipient certificate</CODE></A>
 or her/his <A HREF="../../iaik/smime/SMimeEncrypted.html#decryptSymmetricKey(java.security.Key, iaik.cms.KeyIdentifier)"><CODE>KeyIdentifier</CODE></A> to
 find the right RecipientInfo and decrypt the symmetric content encryption key.
 <p>
<P>

<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../iaik/cms/EnvelopedDataStream.html" title="class in iaik.cms"><CODE>EnvelopedDataStream</CODE></A>, 
<A HREF="../../iaik/cms/RecipientInfo.html" title="class in iaik.cms"><CODE>RecipientInfo</CODE></A>, 
<A HREF="../../iaik/smime/EncryptedContent.html" title="class in iaik.smime"><CODE>EncryptedContent</CODE></A></DL>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
</TABLE>
&nbsp;<A NAME="fields_inherited_from_class_iaik.cms.EnvelopedDataStream"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Fields inherited from class iaik.cms.<A HREF="../../iaik/cms/EnvelopedDataStream.html" title="class in iaik.cms">EnvelopedDataStream</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../iaik/cms/EnvelopedDataStream.html#blockSize_">blockSize_</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#encryptedContentInfo_">encryptedContentInfo_</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#EXPLICIT">EXPLICIT</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#IMPLICIT">IMPLICIT</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#keyChanged_">keyChanged_</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#originatorInfo_">originatorInfo_</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#recipientInfos_">recipientInfos_</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#securityProvider_">securityProvider_</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#symmetricKey_">symmetricKey_</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#unprotectedAttrs_">unprotectedAttrs_</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#version_">version_</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../iaik/smime/SMimeEncrypted.html#SMimeEncrypted(java.io.InputStream)">SMimeEncrypted</A></B>(java.io.InputStream&nbsp;is)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Creates a new SMimeEncrypted object where the BER encoded message is read
 from the given input stream.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../iaik/smime/SMimeEncrypted.html#SMimeEncrypted(java.io.InputStream, iaik.asn1.structures.AlgorithmID, int)">SMimeEncrypted</A></B>(java.io.InputStream&nbsp;is,
               <A HREF="http://javadoc.iaik.tugraz.at/iaik_jce/current/iaik/asn1/structures/AlgorithmID.html" title="class or interface in iaik.asn1.structures">AlgorithmID</A>&nbsp;contentEA,
               int&nbsp;keyLength)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Creates a new SMimeEncrypted object where the data to be enveloped is read
 from the given InputStream.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../iaik/smime/SMimeEncrypted.html#addRecipient(iaik.x509.X509Certificate, iaik.asn1.structures.AlgorithmID)">addRecipient</A></B>(<A HREF="http://javadoc.iaik.tugraz.at/iaik_jce/current/iaik/x509/X509Certificate.html" title="class or interface in iaik.x509">X509Certificate</A>&nbsp;recipientCertificate,
             <A HREF="http://javadoc.iaik.tugraz.at/iaik_jce/current/iaik/asn1/structures/AlgorithmID.html" title="class or interface in iaik.asn1.structures">AlgorithmID</A>&nbsp;keyEA)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Adds one recipient to this S/MIME EnvelopedData object.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.security.KeyPair</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../iaik/smime/SMimeEncrypted.html#addRecipient(iaik.x509.X509Certificate, iaik.asn1.structures.AlgorithmID, iaik.asn1.structures.AlgorithmID, int)">addRecipient</A></B>(<A HREF="http://javadoc.iaik.tugraz.at/iaik_jce/current/iaik/x509/X509Certificate.html" title="class or interface in iaik.x509">X509Certificate</A>&nbsp;recipientCertificate,
             <A HREF="http://javadoc.iaik.tugraz.at/iaik_jce/current/iaik/asn1/structures/AlgorithmID.html" title="class or interface in iaik.asn1.structures">AlgorithmID</A>&nbsp;keyEA,
             <A HREF="http://javadoc.iaik.tugraz.at/iaik_jce/current/iaik/asn1/structures/AlgorithmID.html" title="class or interface in iaik.asn1.structures">AlgorithmID</A>&nbsp;keyWrapAlg,
             int&nbsp;kekLength)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Adds one recipient to this S/MIME EnvelopedData object.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;javax.crypto.SecretKey</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../iaik/smime/SMimeEncrypted.html#decryptSymmetricKey(java.security.Key, int)">decryptSymmetricKey</A></B>(java.security.Key&nbsp;recipientKey,
                    int&nbsp;recipientInfoIndex)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Uses the specified key for decrypting the content-encryption key to setup the
 cipher for decrypting the encrypted content of this <code>SMimeEncrypted</code>
 object for the requesting recipient, specified by its <code>recipientInfoIndex</code>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;javax.crypto.SecretKey</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../iaik/smime/SMimeEncrypted.html#decryptSymmetricKey(java.security.Key, iaik.cms.KeyIdentifier)">decryptSymmetricKey</A></B>(java.security.Key&nbsp;recipientKey,
                    <A HREF="../../iaik/cms/KeyIdentifier.html" title="interface in iaik.cms">KeyIdentifier</A>&nbsp;recipientIdentifier)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Uses the specified key for decrypting the content-encryption key to setup the
 cipher for decrypting the encrypted content of this <code>SMimeEncrypted</code>
 object for the requesting recipient, specified by the given recipient identifier.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;javax.crypto.SecretKey</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../iaik/smime/SMimeEncrypted.html#decryptSymmetricKey(java.security.Key, iaik.x509.X509Certificate)">decryptSymmetricKey</A></B>(java.security.Key&nbsp;recipientKey,
                    <A HREF="http://javadoc.iaik.tugraz.at/iaik_jce/current/iaik/x509/X509Certificate.html" title="class or interface in iaik.x509">X509Certificate</A>&nbsp;recipientCertificate)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Uses the specified key for decrypting the content-encryption key to setup the
 cipher for decrypting the encrypted content of this <code>SMimeEncrypted</code>
 object for the requesting recipient, specified by the given recipient certificate.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://javadoc.iaik.tugraz.at/iaik_jce/current/iaik/asn1/structures/AlgorithmID.html" title="class or interface in iaik.asn1.structures">AlgorithmID</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../iaik/smime/SMimeEncrypted.html#getEncryptionAlgorithm()">getEncryptionAlgorithm</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the content-encryption algorithm (including any associated
 parameters) of this SMimeEncrypted object.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../iaik/smime/SMimeEncrypted.html#getRecipientInfoIndex(iaik.x509.X509Certificate)">getRecipientInfoIndex</A></B>(<A HREF="http://javadoc.iaik.tugraz.at/iaik_jce/current/iaik/x509/X509Certificate.html" title="class or interface in iaik.x509">X509Certificate</A>&nbsp;recipientCertificate)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the recipient info index matching to the supplied recipient certificate.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="http://javadoc.iaik.tugraz.at/iaik_jce/current/iaik/asn1/ASN1Object.html" title="class or interface in iaik.asn1">ASN1Object</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../iaik/smime/SMimeEncrypted.html#toASN1Object(int)">toASN1Object</A></B>(int&nbsp;blockSize)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the CMS EnvelopedData object as an ASN1Object wrapped into a ContentInfo.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../iaik/smime/SMimeEncrypted.html#writeTo(java.io.OutputStream)">writeTo</A></B>(java.io.OutputStream&nbsp;os)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Writes this SMimeEncrypted object to the supplied output stream.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../iaik/smime/SMimeEncrypted.html#writeTo(java.io.OutputStream, int)">writeTo</A></B>(java.io.OutputStream&nbsp;os,
        int&nbsp;blockSize)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Writes this SMimeEncrypted object to the supplied output stream.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_iaik.cms.EnvelopedDataStream"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class iaik.cms.<A HREF="../../iaik/cms/EnvelopedDataStream.html" title="class in iaik.cms">EnvelopedDataStream</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../iaik/cms/EnvelopedDataStream.html#addRecipientInfo(iaik.cms.RecipientInfo)">addRecipientInfo</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#decode(java.io.InputStream)">decode</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#getBlockSize()">getBlockSize</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#getContentType()">getContentType</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#getEncryptedContentInfo()">getEncryptedContentInfo</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#getInputStream()">getInputStream</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#getMode()">getMode</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#getOriginatorInfo()">getOriginatorInfo</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#getRecipientInfo(iaik.cms.KeyIdentifier)">getRecipientInfo</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#getRecipientInfo(iaik.x509.X509Certificate)">getRecipientInfo</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#getRecipientInfos()">getRecipientInfos</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#getRecipientInfos(int)">getRecipientInfos</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#getSecurityProvider()">getSecurityProvider</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#getUnprotectedAttribute(iaik.asn1.ObjectID)">getUnprotectedAttribute</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#getUnprotectedAttributes()">getUnprotectedAttributes</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#getVersion()">getVersion</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#notifyEOF()">notifyEOF</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#setBlockSize(int)">setBlockSize</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#setInputStream(java.io.InputStream)">setInputStream</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#setMode(int)">setMode</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#setOriginatorInfo(iaik.cms.OriginatorInfo)">setOriginatorInfo</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#setRecipientInfos(iaik.cms.RecipientInfo[])">setRecipientInfos</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#setSecurityProvider(iaik.cms.SecurityProvider)">setSecurityProvider</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#setUnprotectedAttributes(iaik.asn1.structures.Attribute[])">setUnprotectedAttributes</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#setupCipher(java.security.Key)">setupCipher</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#setupCipher(java.security.Key, int)">setupCipher</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#setupCipher(java.security.Key, iaik.cms.KeyIdentifier)">setupCipher</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#setupCipher(java.security.Key, iaik.x509.X509Certificate)">setupCipher</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#toASN1Object()">toASN1Object</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#toString()">toString</A>, <A HREF="../../iaik/cms/EnvelopedDataStream.html#toString(boolean)">toString</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="SMimeEncrypted(java.io.InputStream, iaik.asn1.structures.AlgorithmID, int)"><!-- --></A><H3>
SMimeEncrypted</H3>
<PRE>
public <B>SMimeEncrypted</B>(java.io.InputStream&nbsp;is,
                      <A HREF="http://javadoc.iaik.tugraz.at/iaik_jce/current/iaik/asn1/structures/AlgorithmID.html" title="class or interface in iaik.asn1.structures">AlgorithmID</A>&nbsp;contentEA,
                      int&nbsp;keyLength)
               throws java.security.NoSuchAlgorithmException</PRE>
<DL>
<DD>Creates a new SMimeEncrypted object where the data to be enveloped is read
 from the given InputStream.
 <p>
 This constructor automatically will create the symmetric content
 encryption key for the specified algorithm.
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>is</CODE> - an InputStream holding the data to be enveloped<DD><CODE>contentEA</CODE> - the content encryption algorithm to be used<DD><CODE>keyLength</CODE> - the length of the key; undefined values set the
        default key length for the specified algorithm (e.g. 128 for RC2)
<DT><B>Throws:</B>
<DD><CODE>java.security.NoSuchAlgorithmException</CODE> - if there is no implementation for the specified algorithm</DL>
</DL>
<HR>

<A NAME="SMimeEncrypted(java.io.InputStream)"><!-- --></A><H3>
SMimeEncrypted</H3>
<PRE>
public <B>SMimeEncrypted</B>(java.io.InputStream&nbsp;is)
               throws java.io.IOException</PRE>
<DL>
<DD>Creates a new SMimeEncrypted object where the BER encoded message is read
 from the given input stream.
 <p>
 Do <i><b>not</b></i> use this constructor for supplying the content data
 to be enveloped. This constructor may be used by the recipient for parsing an
 already exisiting <code>SMimeEncrypted</code> object, supplied as BER encoding
 from an input stream, that may have been created by means of the
 <A HREF="../../iaik/smime/SMimeEncrypted.html#writeTo(java.io.OutputStream)"><CODE>writeTo</CODE></A> method.
 <p>
 Use the <A HREF="../../iaik/smime/SMimeEncrypted.html#SMimeEncrypted(java.io.InputStream, iaik.asn1.structures.AlgorithmID, int)"><CODE>SMimeEncrypted(InputStream is, AlgorithmID contentEA, int keyLength) </CODE></A>
 constructor for supplying the content data to be enveloped when creating a
 <code>SMimeEncrypted</code> object.
 <p>
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>is</CODE> - the input stream where the BER encoded message shall be read from
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - if an I/O error occurs</DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getRecipientInfoIndex(iaik.x509.X509Certificate)"><!-- --></A><H3>
getRecipientInfoIndex</H3>
<PRE>
public int <B>getRecipientInfoIndex</B>(<A HREF="http://javadoc.iaik.tugraz.at/iaik_jce/current/iaik/x509/X509Certificate.html" title="class or interface in iaik.x509">X509Certificate</A>&nbsp;recipientCertificate)</PRE>
<DL>
<DD>Returns the recipient info index matching to the supplied recipient certificate.
 This method may be used by a recipient for quering for the recipient info
 that holds the content encryption key encrypted with the public key of the
 given certificate.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>recipientCertificate</CODE> - the certificate of the recipient
<DT><B>Returns:</B><DD>the recipient info index matching to the supplied recipient certificate,
         or <code>-1</code> if no recipient info belonging to the given
         certificate can be found</DL>
</DD>
</DL>
<HR>

<A NAME="decryptSymmetricKey(java.security.Key, int)"><!-- --></A><H3>
decryptSymmetricKey</H3>
<PRE>
public javax.crypto.SecretKey <B>decryptSymmetricKey</B>(java.security.Key&nbsp;recipientKey,
                                                  int&nbsp;recipientInfoIndex)
                                           throws <A HREF="../../iaik/smime/SMimeException.html" title="class in iaik.smime">SMimeException</A>,
                                                  java.security.InvalidKeyException</PRE>
<DL>
<DD>Uses the specified key for decrypting the content-encryption key to setup the
 cipher for decrypting the encrypted content of this <code>SMimeEncrypted</code>
 object for the requesting recipient, specified by its <code>recipientInfoIndex</code>.
 <p>
 This method first uses the given key for decrypting the encrypted
 temporary symmetric key obtained from the corresponding <code>RecipientInfo</code>
 structure, and subsequently uses this key to initialize a CipherInputStream for
 decrypting the inherent encrypted content.
 <p>
 Note that the cipher will be only initialized for decrypting in this class. The
 encrypted-content decryption actually is done during reading the data obtained by calling the
 <A HREF="../../iaik/cms/EnvelopedDataStream.html#getInputStream()"><CODE>getInputStream</CODE></A> method. So do not call
 <code>getInputStream</code> before decrypting the encrypted content-encryption
 key!
 <p>
 <b>Note</b> that you have to know the right index into the <code>recipientInfos</code>
 field when using this method for decrypting the encrypted content-encryption key
 and setting up the cipher for decryption. You may search for the index by using 
 the <A HREF="../../iaik/smime/SMimeEncrypted.html#getRecipientInfoIndex(iaik.x509.X509Certificate)"><CODE>getRecipientInfoIndex</CODE></A> method.
 <br>
 However, when having some recipient using a key agreement protocol the corresponding
 RecipientInfo is of type <A HREF="../../iaik/cms/KeyAgreeRecipientInfo.html" title="class in iaik.cms"><CODE>KeyAgreeRecipientInfo</CODE></A>
 which may hold encrypted content-encryption keys for more than only one recipients 
 using the same key agreement algorithm with same domain parameters. Since this 
 <code>decryptSymmetricKey</code> method only can get the KeyAgreeRecipientInfo with
 the given index (but not search for the right recipient in the KeyAgreeRecipientInfo), it
 will step through any recipient included in the KeyAgreeRecipientInfo trying to
 decrypt the encrypted content-encryption key with the supplied key. This may give
 some overhead so it might be appropriate to use another <code>decryptSymmetricKey</code> method
 allowing to immediately identify the particular recipient in mind by its
 #decryptSymmetricKey(Key, KeyIdentifier) keyIdentifier} or <A HREF="../../iaik/smime/SMimeEncrypted.html#decryptSymmetricKey(java.security.Key, iaik.x509.X509Certificate)"><CODE>certificate</CODE></A>.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>recipientKey</CODE> - the key of the recipient to be used for decrypting
                     the encrypted content-encryption key.<DD><CODE>recipientInfoIndex</CODE> - the index into the recipientInfos field
<DT><B>Returns:</B><DD>the (decrypted) secret content encryption key
<DT><B>Throws:</B>
<DD><CODE>SMIMEException</CODE> - if there occurs an error while decrypting the content-encryption key
            or setting up the cipher for decrypting the content
<DD><CODE>java.security.InvalidKeyException</CODE> - if the specified recipient key is not valid
<DD><CODE><A HREF="../../iaik/smime/SMimeException.html" title="class in iaik.smime">SMimeException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="decryptSymmetricKey(java.security.Key, iaik.cms.KeyIdentifier)"><!-- --></A><H3>
decryptSymmetricKey</H3>
<PRE>
public javax.crypto.SecretKey <B>decryptSymmetricKey</B>(java.security.Key&nbsp;recipientKey,
                                                  <A HREF="../../iaik/cms/KeyIdentifier.html" title="interface in iaik.cms">KeyIdentifier</A>&nbsp;recipientIdentifier)
                                           throws <A HREF="../../iaik/smime/SMimeException.html" title="class in iaik.smime">SMimeException</A>,
                                                  java.security.InvalidKeyException</PRE>
<DL>
<DD>Uses the specified key for decrypting the content-encryption key to setup the
 cipher for decrypting the encrypted content of this <code>SMimeEncrypted</code>
 object for the requesting recipient, specified by the given recipient identifier.
 <p>
 This method first uses the given key for decrypting the encrypted
 temporary symmetric key obtained from the corresponding <code>RecipientInfo</code>
 structure, and subsequently uses this key to initialize a CipherInputStream for
 decrypting the inherent encrypted content.
 <p>
 Note that the cipher will be only initialized for decrypting in this class. The
 encrypted-content decryption actually is done during reading the data obtained by calling the
 <A HREF="../../iaik/cms/EnvelopedDataStream.html#getInputStream()"><CODE>getInputStream</CODE></A> method. So do not call
 <code>getInputStream</code> before decrypting the encrypted content-encryption
 key!
 <p>
 This <code>decryptSymmetricKey</code> method can be used to decrypt the encrypted
 content-encryption key and setup the cipher for decryption for
 any type of RecipientInfo. The supplied recipient identifier will be used for
 searching for the right RecipientInfo in the <code>recipientInfos</code> field.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>recipientKey</CODE> - the key of the recipient to be used for decrypting
                     the encrypted content-encryption key.<DD><CODE>recipientIdentifier</CODE> - specifies which RecipientInfo the given key belongs to
<DT><B>Returns:</B><DD>the (decrypted) secret content encryption key
<DT><B>Throws:</B>
<DD><CODE>SMIMEException</CODE> - if there occurs an error while decrypting the content-encryption key
            or setting up the cipher for decrypting the content, or no RecipientInfo
            for the requested recipient is included
<DD><CODE>java.security.InvalidKeyException</CODE> - if the specified recipient key is not valid
<DD><CODE><A HREF="../../iaik/smime/SMimeException.html" title="class in iaik.smime">SMimeException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="decryptSymmetricKey(java.security.Key, iaik.x509.X509Certificate)"><!-- --></A><H3>
decryptSymmetricKey</H3>
<PRE>
public javax.crypto.SecretKey <B>decryptSymmetricKey</B>(java.security.Key&nbsp;recipientKey,
                                                  <A HREF="http://javadoc.iaik.tugraz.at/iaik_jce/current/iaik/x509/X509Certificate.html" title="class or interface in iaik.x509">X509Certificate</A>&nbsp;recipientCertificate)
                                           throws <A HREF="../../iaik/smime/SMimeException.html" title="class in iaik.smime">SMimeException</A>,
                                                  java.security.InvalidKeyException</PRE>
<DL>
<DD>Uses the specified key for decrypting the content-encryption key to setup the
 cipher for decrypting the encrypted content of this <code>SMimeEncrypted</code>
 object for the requesting recipient, specified by the given recipient certificate.
 <p>
 This method first uses the given key for decrypting the encrypted
 temporary symmetric key obtained from the corresponding <code>RecipientInfo</code>
 structure, and subsequently uses this key to initialize a CipherInputStream for
 decrypting the inherent encrypted content.
 <p>
 Note that the cipher will be only initialized for decrypting in this class. The
 encrypted-content decryption actually is done during reading the data obtained by calling the
 <A HREF="../../iaik/cms/EnvelopedDataStream.html#getInputStream()"><CODE>getInputStream</CODE></A> method. So do not call
 <code>getInputStream</code> before decrypting the encrypted content-encryption
 key!
 <p>
 <b>Note</b> that this method only can be used for decrypting the encrypted content
 encyrption key and setting up the cipher for content decryption if the recipient
 in mind has a RecipientInfo of type <A HREF="../../iaik/cms/KeyTransRecipientInfo.html" title="class in iaik.cms"><CODE>KeyTransRecipientInfo</CODE></A> or <A HREF="../../iaik/cms/KeyAgreeRecipientInfo.html" title="class in iaik.cms"><CODE>KeyAgreeRecipientInfo</CODE></A> using a public
 key from a certificate for its key management protocol. However, this should be
 no problem since S/MIME generally only uses certificate based RecipientInfos.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>recipientKey</CODE> - the key of the recipient to be used for decrypting
                     the encrypted content-encryption key.<DD><CODE>recipientCertificate</CODE> - the certificate of the recipient specifying which 
        RecipientInfo the recipient private key belongs to
<DT><B>Returns:</B><DD>the (decrypted) secret content encryption key
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../iaik/smime/SMimeException.html" title="class in iaik.smime">SMimeException</A></CODE> - if there occurs an error while decrypting the content-encryption key
            or setting up the cipher for decrypting the content, or no RecipientInfo
            for the requested recipient is included
<DD><CODE>java.security.InvalidKeyException</CODE> - if the specified recipient key is not valid</DL>
</DD>
</DL>
<HR>

<A NAME="addRecipient(iaik.x509.X509Certificate, iaik.asn1.structures.AlgorithmID)"><!-- --></A><H3>
addRecipient</H3>
<PRE>
public void <B>addRecipient</B>(<A HREF="http://javadoc.iaik.tugraz.at/iaik_jce/current/iaik/x509/X509Certificate.html" title="class or interface in iaik.x509">X509Certificate</A>&nbsp;recipientCertificate,
                         <A HREF="http://javadoc.iaik.tugraz.at/iaik_jce/current/iaik/asn1/structures/AlgorithmID.html" title="class or interface in iaik.asn1.structures">AlgorithmID</A>&nbsp;keyEA)</PRE>
<DL>
<DD>Adds one recipient to this S/MIME EnvelopedData object.
 <p>
 When using this method for adding a Recipient, the corresponding 
 RecipientInfo will be the <A HREF="../../iaik/cms/KeyTransRecipientInfo.html" title="class in iaik.cms"><CODE>KeyTransRecipientInfo</CODE></A> choice and the recipient certificate will
 be identified by <A HREF="../../iaik/cms/IssuerAndSerialNumber.html" title="class in iaik.cms"><CODE>IssuerAndSerialNumber</CODE></A>. So use this method with <code>rsaEncyrption</code>
 as key transport algorithm to be compatible to S/MIMEv2.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>recipientCertificate</CODE> - the certificate of the recipient<DD><CODE>keyEA</CODE> - the algorithm to use for encrypting the symmetric key
              (e.g. AlgorithmID.rsaEncryption)</DL>
</DD>
</DL>
<HR>

<A NAME="addRecipient(iaik.x509.X509Certificate, iaik.asn1.structures.AlgorithmID, iaik.asn1.structures.AlgorithmID, int)"><!-- --></A><H3>
addRecipient</H3>
<PRE>
public java.security.KeyPair <B>addRecipient</B>(<A HREF="http://javadoc.iaik.tugraz.at/iaik_jce/current/iaik/x509/X509Certificate.html" title="class or interface in iaik.x509">X509Certificate</A>&nbsp;recipientCertificate,
                                          <A HREF="http://javadoc.iaik.tugraz.at/iaik_jce/current/iaik/asn1/structures/AlgorithmID.html" title="class or interface in iaik.asn1.structures">AlgorithmID</A>&nbsp;keyEA,
                                          <A HREF="http://javadoc.iaik.tugraz.at/iaik_jce/current/iaik/asn1/structures/AlgorithmID.html" title="class or interface in iaik.asn1.structures">AlgorithmID</A>&nbsp;keyWrapAlg,
                                          int&nbsp;kekLength)
                                   throws <A HREF="../../iaik/smime/SMimeException.html" title="class in iaik.smime">SMimeException</A></PRE>
<DL>
<DD>Adds one recipient to this S/MIME EnvelopedData object.
 <p>
 When using this method for adding a Recipient, the corresponding 
 RecipientInfo will be the <A HREF="../../iaik/cms/KeyAgreeRecipientInfo.html" title="class in iaik.cms"><CODE>KeyAgreeRecipientInfo</CODE></A> choice and the recipient certificate will
 be identified by <A HREF="../../iaik/cms/IssuerAndSerialNumber.html" title="class in iaik.cms"><CODE>IssuerAndSerialNumber</CODE></A>. The KeyAgreeRecipientInfo <code>originator</code>
 field will be the <code>OriginatorPublicKey</code> choice for using
 an ephemeral originator key.
 <p>
 This method may be called repeatedly for adding information for each recipient
 using key agreement as key management protocol. When calling this method the 
 first time (for adding the first "KeyAgree" recipient) and the originator key 
 yet has not been set, this method itself creates a <A HREF="../../iaik/cms/OriginatorPublicKey.html" title="class in iaik.cms"><CODE>OriginatorPublicKey</CODE></A> with domain parameters matching to those of the supplied 
 recipient key. Any further call of this method might add a recipient to an 
 already existing KeyAgreeRecipientInfo (if the recipient to be added has a public
 key with domain parameters matching to those of an already existing 
 KeyAgreeRecipientInfo originator key) or create a new KeyAgreeRecipientInfo
 for this recipient.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>recipientCertificate</CODE> - the certificate of the recipient<DD><CODE>keyEA</CODE> - the (key agreement) algorithm to use for creating a shared secret
              key encryption key for encrypting the symmetric key
              (e.g. AlgorithmID.esdhKeyAgreement)<DD><CODE>keyWrapAlg</CODE> - the key wrap algorithm to be used for encrypting (wrapping)
                   the content-encryption key with the shared key-encryption
                   created according to the requested key agreement protocol<DD><CODE>kekLength</CODE> - the length of the shared key encryption key to be generated
<DT><B>Returns:</B><DD>the originator key pair matching to the domain parameters of the 
             recipient key
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../iaik/smime/SMimeException.html" title="class in iaik.smime">SMimeException</A></CODE> - if it was not possible to create a RecipientInfo or encrypt the 
            symmetric key for this recipient</DL>
</DD>
</DL>
<HR>

<A NAME="getEncryptionAlgorithm()"><!-- --></A><H3>
getEncryptionAlgorithm</H3>
<PRE>
public <A HREF="http://javadoc.iaik.tugraz.at/iaik_jce/current/iaik/asn1/structures/AlgorithmID.html" title="class or interface in iaik.asn1.structures">AlgorithmID</A> <B>getEncryptionAlgorithm</B>()</PRE>
<DL>
<DD>Returns the content-encryption algorithm (including any associated
 parameters) of this SMimeEncrypted object.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the content-encryption AlgorithmID</DL>
</DD>
</DL>
<HR>

<A NAME="toASN1Object(int)"><!-- --></A><H3>
toASN1Object</H3>
<PRE>
public <A HREF="http://javadoc.iaik.tugraz.at/iaik_jce/current/iaik/asn1/ASN1Object.html" title="class or interface in iaik.asn1">ASN1Object</A> <B>toASN1Object</B>(int&nbsp;blockSize)
                        throws <A HREF="../../iaik/cms/CMSException.html" title="class in iaik.cms">CMSException</A></PRE>
<DL>
<DD>Returns the CMS EnvelopedData object as an ASN1Object wrapped into a ContentInfo.
 Automatically enforces block encoding with a block size of 2048 if
 a negative blockSize value is supplied.
<P>
<DD><DL>
<DT><B>Overrides:</B><DD><CODE><A HREF="../../iaik/cms/EnvelopedDataStream.html#toASN1Object(int)">toASN1Object</A></CODE> in class <CODE><A HREF="../../iaik/cms/EnvelopedDataStream.html" title="class in iaik.cms">EnvelopedDataStream</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>blockSize</CODE> - the block size for using block encoding
<DT><B>Returns:</B><DD>the S/MIME enveloped message as an ASN1Object
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../iaik/cms/CMSException.html" title="class in iaik.cms">CMSException</A></CODE> - if an error occurs while building the
            ASN.1 object</DL>
</DD>
</DL>
<HR>

<A NAME="writeTo(java.io.OutputStream)"><!-- --></A><H3>
writeTo</H3>
<PRE>
public void <B>writeTo</B>(java.io.OutputStream&nbsp;os)
             throws java.io.IOException</PRE>
<DL>
<DD>Writes this SMimeEncrypted object to the supplied output stream.
 Automatically enforces block encoding with a block size of 2048.
<P>
<DD><DL>
<DT><B>Overrides:</B><DD><CODE><A HREF="../../iaik/cms/EnvelopedDataStream.html#writeTo(java.io.OutputStream)">writeTo</A></CODE> in class <CODE><A HREF="../../iaik/cms/EnvelopedDataStream.html" title="class in iaik.cms">EnvelopedDataStream</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>os</CODE> - the output stream to which this SMimeEncrypted shall be written
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - if an I/O error occurs while writing to the stream</DL>
</DD>
</DL>
<HR>

<A NAME="writeTo(java.io.OutputStream, int)"><!-- --></A><H3>
writeTo</H3>
<PRE>
public void <B>writeTo</B>(java.io.OutputStream&nbsp;os,
                    int&nbsp;blockSize)
             throws java.io.IOException</PRE>
<DL>
<DD>Writes this SMimeEncrypted object to the supplied output stream.
 The <code>blockSize</code> parameter indicates the block size to
 be used for performimg block encoding.
<P>
<DD><DL>
<DT><B>Overrides:</B><DD><CODE><A HREF="../../iaik/cms/EnvelopedDataStream.html#writeTo(java.io.OutputStream, int)">writeTo</A></CODE> in class <CODE><A HREF="../../iaik/cms/EnvelopedDataStream.html" title="class in iaik.cms">EnvelopedDataStream</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>os</CODE> - the output stream to which this SMimeEncrypted shall be written<DD><CODE>blockSize</CODE> - the block size for using block encoding
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - if an I/O error occurs while writing to the stream</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
<small>This Javadoc may contain text parts from text parts from IETF Internet Standard specifications (see <a href=../../RefCopyright.html#RFC>copyright</a> note).</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../iaik/smime/SMimeContent.html" title="class in iaik.smime"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../iaik/smime/SMimeException.html" title="class in iaik.smime"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../index.html?iaik/smime/SMimeEncrypted.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="SMimeEncrypted.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#fields_inherited_from_class_iaik.cms.EnvelopedDataStream">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
<IMG SRC=../../siclogo.jpg> <IMG SRC=../../iaik_logo.gif> IAIK-CMS 5.1, (c) 2002 <A HREF="http://jce.iaik.tugraz.at/">IAIK</A>, (c) 2003 - 2010 <A HREF="http://jce.iaik.tugraz.at/">SIC</A>
</BODY>
</HTML>

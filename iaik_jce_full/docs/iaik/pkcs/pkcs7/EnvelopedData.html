<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0) on Mon Dec 21 16:59:21 CET 2015 -->
<title>EnvelopedData (5.3 API Documentation)</title>
<meta name="date" content="2015-12-21">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="EnvelopedData (5.3 API Documentation)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><em>
					
			
			<b>IAIK-JCE Provider API Documentation</b>
		<br>
			<font size=-1>Version 5.3</font>
			
		
				</em></div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../iaik/pkcs/pkcs7/EncryptedDataStream.html" title="class in iaik.pkcs.pkcs7"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html" title="class in iaik.pkcs.pkcs7"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?iaik/pkcs/pkcs7/EnvelopedData.html" target="_top">Frames</a></li>
<li><a href="EnvelopedData.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#fields_inherited_from_class_iaik.pkcs.pkcs7.EnvelopedDataStream">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">iaik.pkcs.pkcs7</div>
<h2 title="Class EnvelopedData" class="title">Class EnvelopedData</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html" title="class in iaik.pkcs.pkcs7">iaik.pkcs.pkcs7.EnvelopedDataStream</a></li>
<li>
<ul class="inheritance">
<li>iaik.pkcs.pkcs7.EnvelopedData</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../iaik/pkcs/pkcs7/Content.html" title="interface in iaik.pkcs.pkcs7">Content</a>, <a href="../../../iaik/pkcs/pkcs7/ContentStream.html" title="interface in iaik.pkcs.pkcs7">ContentStream</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">EnvelopedData</span>
extends <a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html" title="class in iaik.pkcs.pkcs7">EnvelopedDataStream</a>
implements <a href="../../../iaik/pkcs/pkcs7/Content.html" title="interface in iaik.pkcs.pkcs7">Content</a></pre>
<div class="block">This class represents the non-stream supporting implementation of the PKCS#7
 content type <code>EnvelopedData</code>.
 <p>
 Each PKCS#7 content type is associated with a specific object identifier,
 derived from:
 <p>
 
 <PRE>
 pkcs-7 OBJECT IDENTIFIER ::=
   { iso(1) member-body(2) US(840) rsadsi(113549)
       pkcs(1) 7 }
 </PRE>
 <p>
 The object identifier for the <code>EnvelopedData</code> content type is
 defined as:
 <p>
 <code>
 envelopedData OBJECT IDENTIFIER ::= { pkcs-7 3 }
 </code>
 <p>
 which corresponds to the OID string "1.2.840.1.113549.1.7.3".
 <p>
 The <a href = http://www.rsasecurity.com/rsalabs/pkcs/pkcs-7/>PKCS#7
 Cryptographic Message Standard</a> specifies the <code>EnvelopedData</code>
 content type for providing a syntax for building digital envelopes. Content
 of any type may be enveloped for any number of recipients in parallel. For
 each recipient, a commonly at random generated content-encryption key is
 encrypted with the particular recipient's public key and - together with
 recipient-specific information - collected into a <code>RecipientInfo</code>
 value. The content is encrypted with the content-encryption key giving a
 <code>EncryptedContent</code> value, which - in combination with a
 recipient-specific encrypted content-encryption key - forms the digital
 envelope for each particular recipient. All <code>RecipientInfo</code> values
 are collected together with the encrypted content into an<code>
 EnvelopedData</code> value to be sent to each intended recipient.
 <p>
 This class implements the <code>EnvelopedData</code> structure resulting from
 the last step described above. The <code>EnvelopedData</code> type is defined
 as ASN.1 SEQUENCE type containing the following components (see <a href =
 http://www.rsasecurity.com/rsalabs/pkcs/pkcs-7/>PKCS#7 specification</a>,
 Version&nbsp;1.5):
 <p>
 
 <PRE>
 EnvelopedData ::= SEQUENCE {
   version                Version,
   recipientInfos         RecipientInfos,
   encryptedContentInfo   EncryptedContentInfo }
 <br>
 RecipientInfos ::= SET OF RecipientInfo
 <br>
 EncryptedContentInfo ::= SEQUENCE {
   contentType                 ContentType,
   contentEncryptionAlgorithm  ContentEncryptionAlgorithmIdentifier,
   encryptedContent            [0] IMPLICIT EncryptedContent OPTIONAL }
 <br>
 EncryptedContent ::= OCTET STRING
 </PRE>
 <p>
 The <code>recipientInfos</code> field is a non-empty collection of
 per-recipient information. The <code>encryptedContentInfo</code> field
 specifies the type of the content being enveloped, the content-encryption
 algorithm (the same for all recipients) used for encrypting the content, and
 the result of the content encryption. If the encrypted content value is not
 present in the <code>encryptedContent</code> field, it has to be supplied by
 other means.
 <p>
 A recipient, when receiving the <code>EnvelopedData</code> message, decrypts
 the corresponding encrypted content-encryption key with his/her private key
 for subsequently decrypting the encrypted content using the
 content-encryption key just recovered. The recipient's private key is
 referenced by an issuer distinguished name and an issuer-specific serial
 number that uniquely identify the certificate for the corresponding public
 key.
 <p>
 For more information consult the RSA <a href =
 http://www.rsasecurity.com/rsalabs/pkcs/pkcs-7/>PKCS#7</a> specification.
 <p>
 <hr>
 <p>
 When creating a new <code>EnvelopedData</code> object for the data to be
 enveloped the symmetric algorithm has to be specified to be used for
 content-encryption. After setting the recipients, the EnvelopedData object
 may be prepared for transmission by transforming it into an ASN1Object or
 immediately encoding it, e.g.:
 <ol>
 <li>Create a new EnvelopedData object and specify the content encryption
 algorithm to be used by means of the
 <a href="../../../iaik/pkcs/pkcs7/EnvelopedData.html#EnvelopedData(byte[], iaik.asn1.structures.AlgorithmID)"><code>EnvelopedData(byte[] content,
 AlgorithmID contentEA)</code></a> constructor:
 
 <pre>
     //the data to be enveloped:
     byte[] data = ...;
     //use TripleDES in CBC mode for encrypting the content
     EnvelopedData enveloped_data = new EnvelopedData(data, AlgorithmID.des_EDE3_CBC);
 </pre>
 
 <li>For each intended recipient, create a
 <a href="../../../iaik/pkcs/pkcs7/RecipientInfo.html" title="class in iaik.pkcs.pkcs7"><code>RecipientInfo</code></a> object, and add all
 RecipientInfos to the EnvelopedData structure by calling the
 <a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html#setRecipientInfos(iaik.pkcs.pkcs7.RecipientInfo[])"><code>setRecipientInfos</code></a> method, e.g.
 (assuming to add two recipients with corresponding certificates
 <code>cert1</code> and <code>cert2</code>; currently only the PKCS#1
 <i>rsaEncryption</i> is supported as key- encryption algorithm):
 
 <pre>
 RecipientInfo[] recipients = new RecipientInfo[2];
 recipients[0] = new RecipientInfo(cert1, AlgorithmID.rsaEncryption);
 recipients[1] = new RecipientInfo(cert2, AlgorithmID.rsaEncryption);
 enveloped_data.setRecipientInfos(recipients);
 </pre>
 
 <li>Prepare the EnvelopedData object for transmission by transforming it into
 an ASN1Object or immediately encoding it. This step also will perform the
 encryption of the symmetric content-encryption key for each participated
 recipient.
 
 <pre>
 ASN1Object obj = enveloped_data.toASN1Object();
 </pre>
 
 respectively
 
 <pre>
 byte[] encoding = enveloped_data.getEncoding();
 </pre>
 
 For forcing a constructed, blocksize oriented encoding, alternatively you may
 use the corresponding <code>writeTo</code> method of the parent
 <code>EnvelopedDataStream</code> class.
 </ol>
 A recipient, when receiving an ASN1Object representing an EnvelopedData
 structure, uses the <a href="../../../iaik/pkcs/pkcs7/EnvelopedData.html#EnvelopedData(iaik.asn1.ASN1Object)"><code>EnvelopedData(ASN1Object obj)</code></a> constructor for parsing the internal
 structure. Before getting the recovered content by means of the
 <a href="../../../iaik/pkcs/pkcs7/EnvelopedData.html#getContent()"><code>getContent</code></a> method, the cipher has to be initialized for
 decryption with the particular recipient's private key by calling the
 <a href="../../../iaik/pkcs/pkcs7/EnvelopedData.html#setupCipher(java.security.PrivateKey, int)"><code>setupCipher</code></a> method:
 <ol>
 <li>If the EnvelopedData is supplied as DER encoding, first decode it to an
 ASN1Object:
 
 <pre>
 ASN1Object obj = DerCoder.decode(encoding);
 </pre>
 
 <li>Create an EnvelopedData structure from the supplied ASN.1 object, and
 parse the internal structure:
 
 <pre>
 EnvelopedData enveloped_data = new EnvelopedData(obj);
 </pre>
 
 <li>Get information about the inherent EncryptedContentInfo:
 
 <pre>
 EncryptedContentInfo eci = (EncryptedContentInfo) enveloped_data
     .getEncryptedContentInfo();
 System.out.println(&quot;Content type: &quot; + eci.getContentType().getName());
 System.out.println(&quot;Content encryption algorithm: &quot;
     + eci.getContentEncryptionAlgorithm().getName());
 </pre>
 
 <li>Get information about the included RecipientInfos:
 
 <pre>
 RecipientInfo[] recipients = enveloped_data.getRecipientInfos();
 System.out.pritnln(&quot;Included RecipientInfos:&quot;);
 for (int i = 0; i &lt; recipients.length; i++) {
   System.out.print(&quot;Recipient &quot; + (i + 1) + &quot;:&quot;);
   System.out.println(recipients[i].getIssuerAndSerialNumber());
 }
 </pre>
 
 <li>Use some recipient's specific private key to decrypt the inherent
 encrypted secret key to be used for subsequently performing encrypted-content
 decryption:
 
 <pre>
 // setup cipher for recipient 1:
 int recipientInfoIndex = 0;
 enveloped_data.setupCipher(privateKey, recipientInfoIndex);
 </pre>
 
 Unlike the stream supporting <a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html" title="class in iaik.pkcs.pkcs7"><code>EnvelopedDataStream</code></a> class where the <code>setupCipher</code> method only
 initializes the cipher for decryption, whole the encrypted-content decryption
 already is performed inside the <code>setupCipher</code> method of this
 class.
 <p>
 <li>Get the recovered content:
 
 <pre>
 byte[] content = enveloped_data.getContent();
 </pre>
 
 </ol>
 <p>
 <b>PKCS#7v1.6 Support:<br>
 ===================</b><br>
 This class also may be used for creating/parsing EnvelopedData objects of
 version 1.6 as used by the SET protocol. Main differences between v1.5 and
 v1.6 are the content encryption (v1.6 encrypts the whole content encoding and
 therefore may be unsuitable for handling large amounts of data) and the
 encoding of SET OF structures which is replaced by SEQUENCE OF in PKCS#7v1.6.
 For creating a v1.6 EnvelopedData object you only have to set the version
 number (1 for indicating PKCS#7v1.6) when
 <a href="../../../iaik/pkcs/pkcs7/EnvelopedData.html#EnvelopedData(byte[], iaik.asn1.structures.AlgorithmID, int, int)"><code>creating</code></a> an
 EnvelopedData object:
 
 <pre>
 byte[] content = ...;
 AlgorithmID contentEA = ...;
 int keyLength = ...;
 // version number 1 indicates PKCS#7v1.6
 int version = 1;
 EnvelopedData envelopedData = new EnvelopedData(content, contentEA, keyLength, version);
 ...
 </pre>
 
 On the receiving end you can use this class in the same way as described
 above for parsing and decrypting the content of a PKCS#7v1.5 or v1.6
 EnvelopedData object. Since PKCS#7v1.6 is unsuitable for stream handling, the
 stream based class <code>EnvelopedDataStream</code> does not support
 PKCS#7v1.6.</div>
<dl><dt><span class="strong">Version:</span></dt>
  <dd>File Revision <!-- $$Revision: --> 38 <!-- $ --></dd>
<dt><span class="strong">See Also:</span></dt><dd><a href="../../../iaik/pkcs/pkcs7/RecipientInfo.html" title="class in iaik.pkcs.pkcs7"><code>RecipientInfo</code></a>, 
<a href="../../../iaik/pkcs/pkcs7/EncryptedContentInfo.html" title="class in iaik.pkcs.pkcs7"><code>EncryptedContentInfo</code></a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_iaik.pkcs.pkcs7.EnvelopedDataStream">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;iaik.pkcs.pkcs7.<a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html" title="class in iaik.pkcs.pkcs7">EnvelopedDataStream</a></h3>
<code><a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html#block_size">block_size</a>, <a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html#recipient_infos">recipient_infos</a>, <a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html#symmetric_key">symmetric_key</a>, <a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html#version">version</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colLast" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected </code></td>
<td class="colLast"><code><strong><a href="../../../iaik/pkcs/pkcs7/EnvelopedData.html#EnvelopedData()">EnvelopedData</a></strong>()</code>
<div class="block">Default constructor for dynamic object creation in ContentInfo.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../iaik/pkcs/pkcs7/EnvelopedData.html#EnvelopedData(iaik.asn1.ASN1Object)">EnvelopedData</a></strong>(<a href="../../../iaik/asn1/ASN1Object.html" title="class in iaik.asn1">ASN1Object</a>&nbsp;obj)</code>
<div class="block">Creates a PKCS#7 EnvelopedData from an ASN1Object.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../iaik/pkcs/pkcs7/EnvelopedData.html#EnvelopedData(byte[], iaik.asn1.structures.AlgorithmID)">EnvelopedData</a></strong>(byte[]&nbsp;content,
             <a href="../../../iaik/asn1/structures/AlgorithmID.html" title="class in iaik.asn1.structures">AlgorithmID</a>&nbsp;contentEA)</code>
<div class="block">Creates a new PKCS#7 EnvelopedData object where the raw data is supplied as
 byte array.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../iaik/pkcs/pkcs7/EnvelopedData.html#EnvelopedData(byte[], iaik.asn1.structures.AlgorithmID, int)">EnvelopedData</a></strong>(byte[]&nbsp;content,
             <a href="../../../iaik/asn1/structures/AlgorithmID.html" title="class in iaik.asn1.structures">AlgorithmID</a>&nbsp;contentEA,
             int&nbsp;keyLength)</code>
<div class="block">Creates a new PKCS#7 EnvelopedData object where the raw data is supplied as
 byte array.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../iaik/pkcs/pkcs7/EnvelopedData.html#EnvelopedData(byte[], iaik.asn1.structures.AlgorithmID, int, int)">EnvelopedData</a></strong>(byte[]&nbsp;content,
             <a href="../../../iaik/asn1/structures/AlgorithmID.html" title="class in iaik.asn1.structures">AlgorithmID</a>&nbsp;contentEA,
             int&nbsp;keyLength,
             int&nbsp;version)</code>
<div class="block">Creates a new PKCS#7 EnvelopedData object where the raw data is supplied as
 byte array.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../iaik/pkcs/pkcs7/EnvelopedData.html#EnvelopedData(java.io.InputStream)">EnvelopedData</a></strong>(java.io.InputStream&nbsp;is)</code>
<div class="block">Creates a new EnvelopedData where the DER encoded data is read from the
 given InputStream.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../iaik/pkcs/pkcs7/EnvelopedData.html#EnvelopedData(iaik.pkcs.pkcs7.RecipientInfo[], iaik.pkcs.pkcs7.EncryptedContentInfo)">EnvelopedData</a></strong>(<a href="../../../iaik/pkcs/pkcs7/RecipientInfo.html" title="class in iaik.pkcs.pkcs7">RecipientInfo</a>[]&nbsp;recipients,
             <a href="../../../iaik/pkcs/pkcs7/EncryptedContentInfo.html" title="class in iaik.pkcs.pkcs7">EncryptedContentInfo</a>&nbsp;encryptedCI)</code>
<div class="block">Constructs a PKCS#7 EnvelopedData type with an already created
 EncryptedContentInfo.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../iaik/pkcs/pkcs7/EnvelopedData.html#EnvelopedData(iaik.pkcs.pkcs7.RecipientInfo[], iaik.pkcs.pkcs7.EncryptedContentInfo, int)">EnvelopedData</a></strong>(<a href="../../../iaik/pkcs/pkcs7/RecipientInfo.html" title="class in iaik.pkcs.pkcs7">RecipientInfo</a>[]&nbsp;recipients,
             <a href="../../../iaik/pkcs/pkcs7/EncryptedContentInfo.html" title="class in iaik.pkcs.pkcs7">EncryptedContentInfo</a>&nbsp;encryptedCI,
             int&nbsp;version)</code>
<div class="block">Constructs a PKCS#7 EnvelopedData type with an already created
 EncryptedContentInfo.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../iaik/pkcs/pkcs7/EnvelopedData.html#decode(iaik.asn1.ASN1Object)">decode</a></strong>(<a href="../../../iaik/asn1/ASN1Object.html" title="class in iaik.asn1">ASN1Object</a>&nbsp;obj)</code>
<div class="block">Decodes the given EnvelopedData ASN1 object.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../iaik/pkcs/pkcs7/EnvelopedData.html#decode(java.io.InputStream)">decode</a></strong>(java.io.InputStream&nbsp;is)</code>
<div class="block">Reads and decodes the EnvelopedData from a DerInputStream.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../iaik/pkcs/pkcs7/EnvelopedData.html#getContent()">getContent</a></strong>()</code>
<div class="block">Returns the content as byte array.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../iaik/pkcs/pkcs7/EnvelopedData.html#getEncoded()">getEncoded</a></strong>()</code>
<div class="block">Returns the DER encoding of this EnvelopedData in a byte array.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.Object</code></td>
<td class="colLast"><code><strong><a href="../../../iaik/pkcs/pkcs7/EnvelopedData.html#getEncryptedContentInfo()">getEncryptedContentInfo</a></strong>()</code>
<div class="block">Returns the encrypted content info included in this
 <code>EnvelopedData</code> object.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.io.InputStream</code></td>
<td class="colLast"><code><strong><a href="../../../iaik/pkcs/pkcs7/EnvelopedData.html#getInputStream()">getInputStream</a></strong>()</code>
<div class="block">Returns an InputStream for reading the content.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../iaik/pkcs/pkcs7/EnvelopedData.html#setupCipher(java.security.Key)">setupCipher</a></strong>(java.security.Key&nbsp;key)</code>
<div class="block">Uses the given symmetric key to setup the cipher for decrypting the
 content.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../iaik/pkcs/pkcs7/EnvelopedData.html#setupCipher(java.security.PrivateKey, int)">setupCipher</a></strong>(java.security.PrivateKey&nbsp;recipientPrivateKey,
           int&nbsp;recipientInfoIndex)</code>
<div class="block">Uses the specified private key to setup the Cipher for decrypting the
 content-encryption key and subsequently using it to decrypt the encrypted
 content of this<code>
 EnvelopedData</code> object for the requesting recipient, specified by its
 <code>recipientInfoIndex</code>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../iaik/asn1/ASN1Object.html" title="class in iaik.asn1">ASN1Object</a></code></td>
<td class="colLast"><code><strong><a href="../../../iaik/pkcs/pkcs7/EnvelopedData.html#toASN1Object(int)">toASN1Object</a></strong>(int&nbsp;blockSize)</code>
<div class="block">Returns this EnvelopedData as ASN1Object.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../iaik/pkcs/pkcs7/EnvelopedData.html#toString(boolean)">toString</a></strong>(boolean&nbsp;detailed)</code>
<div class="block">Returns a string giving some - if requested - detailed information about
 this <code>EnvelopedData</code> object.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_iaik.pkcs.pkcs7.EnvelopedDataStream">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;iaik.pkcs.pkcs7.<a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html" title="class in iaik.pkcs.pkcs7">EnvelopedDataStream</a></h3>
<code><a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html#addRecipientInfo(iaik.pkcs.pkcs7.RecipientInfo)">addRecipientInfo</a>, <a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html#getBlockSize()">getBlockSize</a>, <a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html#getContentType()">getContentType</a>, <a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html#getRecipientInfo(java.security.cert.X509Certificate)">getRecipientInfo</a>, <a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html#getRecipientInfos()">getRecipientInfos</a>, <a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html#getVersion()">getVersion</a>, <a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html#setBlockSize(int)">setBlockSize</a>, <a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html#setRecipientInfos(iaik.pkcs.pkcs7.RecipientInfo[])">setRecipientInfos</a>, <a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html#toASN1Object()">toASN1Object</a>, <a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html#toString()">toString</a>, <a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html#writeTo(java.io.OutputStream)">writeTo</a>, <a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html#writeTo(java.io.OutputStream, int)">writeTo</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_iaik.pkcs.pkcs7.ContentStream">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;iaik.pkcs.pkcs7.<a href="../../../iaik/pkcs/pkcs7/ContentStream.html" title="interface in iaik.pkcs.pkcs7">ContentStream</a></h3>
<code><a href="../../../iaik/pkcs/pkcs7/ContentStream.html#getBlockSize()">getBlockSize</a>, <a href="../../../iaik/pkcs/pkcs7/ContentStream.html#getContentType()">getContentType</a>, <a href="../../../iaik/pkcs/pkcs7/ContentStream.html#setBlockSize(int)">setBlockSize</a>, <a href="../../../iaik/pkcs/pkcs7/ContentStream.html#toASN1Object()">toASN1Object</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="EnvelopedData()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>EnvelopedData</h4>
<pre>protected&nbsp;EnvelopedData()</pre>
<div class="block">Default constructor for dynamic object creation in ContentInfo. The block
 size is set to -1 meaning that the data will be encoded a one simple octet
 string by default.</div>
</li>
</ul>
<a name="EnvelopedData(byte[], iaik.asn1.structures.AlgorithmID)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>EnvelopedData</h4>
<pre>public&nbsp;EnvelopedData(byte[]&nbsp;content,
             <a href="../../../iaik/asn1/structures/AlgorithmID.html" title="class in iaik.asn1.structures">AlgorithmID</a>&nbsp;contentEA)
              throws java.security.NoSuchAlgorithmException</pre>
<div class="block">Creates a new PKCS#7 EnvelopedData object where the raw data is supplied as
 byte array. The content type is set to PKCS#7 <b>Data</b>.
 <p>
 When using this constructor, automatically a symmetric key for content
 encryption is generated. For that reason this constructor shall not be used
 in situations where the desired content encryption algorithm requires a
 specific key/parameter handling. In such cases the
 <a href="../../../iaik/pkcs/pkcs7/EnvelopedData.html#EnvelopedData(iaik.pkcs.pkcs7.RecipientInfo[], iaik.pkcs.pkcs7.EncryptedContentInfo)"><code>EnvelopedData(RecipientInfo[], EncryptedContentInfo)</code></a> constructor
 shall be used to be supplied with precomputed RecipientInfos and
 EncryptedContentInfo. Consult the
 <a href="../../../iaik/pkcs/pkcs7/EncryptedContentInfoStream.html" title="class in iaik.pkcs.pkcs7"><code>EncryptedContentInfo(Stream)</code></a> class documentation for more information
 about special key/parameter handling.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>content</code> - the byte array containing the data to envelope</dd><dd><code>contentEA</code> - the content encryption algorithm for encrypting the content</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.security.NoSuchAlgorithmException</code> - if there is no implementation for the specified algorithm</dd></dl>
</li>
</ul>
<a name="EnvelopedData(byte[], iaik.asn1.structures.AlgorithmID, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>EnvelopedData</h4>
<pre>public&nbsp;EnvelopedData(byte[]&nbsp;content,
             <a href="../../../iaik/asn1/structures/AlgorithmID.html" title="class in iaik.asn1.structures">AlgorithmID</a>&nbsp;contentEA,
             int&nbsp;keyLength)
              throws java.security.NoSuchAlgorithmException</pre>
<div class="block">Creates a new PKCS#7 EnvelopedData object where the raw data is supplied as
 byte array. The content type is set to PKCS#7 <b>Data</b>.
 <p>
 When using this constructor, automatically a symmetric key for content
 encryption is generated. If the specified content encryption algorithm
 supports variable key lengths, a particular key length may be set by means
 of the <code>keyLength</code> parameter. If no length is specified, the
 defined default key length will be used. If the algorithm only works with
 keys of fixed-size length, the keyLength parameter may be set to -1 or the
 <a href="../../../iaik/pkcs/pkcs7/EnvelopedData.html#EnvelopedData(byte[], iaik.asn1.structures.AlgorithmID)"><code>EnvelopedData(byte[] content,
 AlgorithmID contentEA)</code></a> constructor may be used.
 <p>
 This constructor shall not be used in situations where the desired content
 encryption algorithm requires a specific key/parameter handling. In such
 cases the <a href="../../../iaik/pkcs/pkcs7/EnvelopedData.html#EnvelopedData(iaik.pkcs.pkcs7.RecipientInfo[], iaik.pkcs.pkcs7.EncryptedContentInfo)"><code>EnvelopedData(RecipientInfo[], EncryptedContentInfo)</code></a>
 constructor shall be used to be supplied with precomputed RecipientInfos
 and EncryptedContentInfo. Consult the
 <a href="../../../iaik/pkcs/pkcs7/EncryptedContentInfoStream.html" title="class in iaik.pkcs.pkcs7"><code>EncryptedContentInfo(Stream)</code></a> class documentation for more information
 about special key/parameter handling.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>content</code> - the byte array containing the data to envelope</dd><dd><code>contentEA</code> - the content encryption algorithm for encrypting the content</dd><dd><code>keyLength</code> - the key length that may be set when using a content encryption
          algorithm that supports variable key lengths</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.security.NoSuchAlgorithmException</code> - if there is no implementation for the specified algorithm</dd></dl>
</li>
</ul>
<a name="EnvelopedData(byte[], iaik.asn1.structures.AlgorithmID, int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>EnvelopedData</h4>
<pre>public&nbsp;EnvelopedData(byte[]&nbsp;content,
             <a href="../../../iaik/asn1/structures/AlgorithmID.html" title="class in iaik.asn1.structures">AlgorithmID</a>&nbsp;contentEA,
             int&nbsp;keyLength,
             int&nbsp;version)
              throws java.security.NoSuchAlgorithmException</pre>
<div class="block">Creates a new PKCS#7 EnvelopedData object where the raw data is supplied as
 byte array. The content type is set to PKCS#7 <b>Data</b>.
 <p>
 When using this constructor, automatically a symmetric key for content
 encryption is generated. If the specified content encryption algorithm
 supports variable key lengths, a particular key length may be set by means
 of the <code>keyLength</code> parameter. If no length is specified, the
 defined default key length will be used. If the algorithm only works with
 keys of fixed-size length, the keyLength parameter may be set to -1 or the
 <a href="../../../iaik/pkcs/pkcs7/EnvelopedData.html#EnvelopedData(byte[], iaik.asn1.structures.AlgorithmID)"><code>EnvelopedData(byte[] content,
 AlgorithmID contentEA)</code></a> constructor may be used.
 <p>
 This constructor shall not be used in situations where the desired content
 encryption algorithm requires a specific key/parameter handling. In such
 cases the <a href="../../../iaik/pkcs/pkcs7/EnvelopedData.html#EnvelopedData(iaik.pkcs.pkcs7.RecipientInfo[], iaik.pkcs.pkcs7.EncryptedContentInfo)"><code>EnvelopedData(RecipientInfo[], EncryptedContentInfo)</code></a>
 constructor shall be used to be supplied with precomputed RecipientInfos
 and EncryptedContentInfo. Consult the
 <a href="../../../iaik/pkcs/pkcs7/EncryptedContentInfoStream.html" title="class in iaik.pkcs.pkcs7"><code>EncryptedContentInfo(Stream)</code></a> class documentation for more information
 about special key/parameter handling.
 <p>
 This constructor may be used for creating an v1.6 EnvelopedData message,
 where the version number (1) has to be supplied for indicating to encrypt
 the content encoding.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>content</code> - the byte array containing the data to envelope</dd><dd><code>contentEA</code> - the content encryption algorithm for encrypting the content</dd><dd><code>keyLength</code> - the key length that may be set when using a content encryption
          algorithm that supports variable key lengths</dd><dd><code>version</code> - either 0 (indicating a PKCS#7v1.5 EnvelopedData) or 1 (indicating
          a PKCS#71.6 EnvelopedData); default is 0.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.security.NoSuchAlgorithmException</code> - if there is no implementation for the specified algorithm</dd></dl>
</li>
</ul>
<a name="EnvelopedData(iaik.pkcs.pkcs7.RecipientInfo[], iaik.pkcs.pkcs7.EncryptedContentInfo)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>EnvelopedData</h4>
<pre>public&nbsp;EnvelopedData(<a href="../../../iaik/pkcs/pkcs7/RecipientInfo.html" title="class in iaik.pkcs.pkcs7">RecipientInfo</a>[]&nbsp;recipients,
             <a href="../../../iaik/pkcs/pkcs7/EncryptedContentInfo.html" title="class in iaik.pkcs.pkcs7">EncryptedContentInfo</a>&nbsp;encryptedCI)</pre>
<div class="block">Constructs a PKCS#7 EnvelopedData type with an already created
 EncryptedContentInfo.
 
 The given array of <code>RecipientInfo</code> specifies a collection of
 per-recipient information, and the given <code>EncryptedContentInfo</code>
 supplies the already encrypted content.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>recipients</code> - information about the recipients</dd><dd><code>encryptedCI</code> - the encrypted content info</dd></dl>
</li>
</ul>
<a name="EnvelopedData(iaik.pkcs.pkcs7.RecipientInfo[], iaik.pkcs.pkcs7.EncryptedContentInfo, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>EnvelopedData</h4>
<pre>public&nbsp;EnvelopedData(<a href="../../../iaik/pkcs/pkcs7/RecipientInfo.html" title="class in iaik.pkcs.pkcs7">RecipientInfo</a>[]&nbsp;recipients,
             <a href="../../../iaik/pkcs/pkcs7/EncryptedContentInfo.html" title="class in iaik.pkcs.pkcs7">EncryptedContentInfo</a>&nbsp;encryptedCI,
             int&nbsp;version)</pre>
<div class="block">Constructs a PKCS#7 EnvelopedData type with an already created
 EncryptedContentInfo.
 <p>
 The given array of <code>RecipientInfo</code> specifies a collection of
 per-recipient information, and the given <code>EncryptedContentInfo</code>
 supplies the already encrypted content.
 <p>
 This constructor may be used for creating an v1.6 EnvelopedData message,
 where the version number (1) has to be supplied for indicating that
 supplied EncryptedContentInfo has encrypted the content encoding.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>recipients</code> - information about the recipients</dd><dd><code>encryptedCI</code> - the encrypted content info</dd><dd><code>version</code> - either 0 (indicating a PKCS#7v1.5 EnvelopedData) or 1 (indicating
          a PKCS#71.6 EnvelopedData); default is 0.</dd></dl>
</li>
</ul>
<a name="EnvelopedData(iaik.asn1.ASN1Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>EnvelopedData</h4>
<pre>public&nbsp;EnvelopedData(<a href="../../../iaik/asn1/ASN1Object.html" title="class in iaik.asn1">ASN1Object</a>&nbsp;obj)
              throws <a href="../../../iaik/pkcs/PKCSParsingException.html" title="class in iaik.pkcs">PKCSParsingException</a></pre>
<div class="block">Creates a PKCS#7 EnvelopedData from an ASN1Object.
 
 The ASN1Object supplied to this constructor represents an already existing
 <code>EnvelopedData</code> object that may have been created by calling
 <a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html#toASN1Object()"><code>toASN1Object</code></a>.
 <p>
 Use the <a href="../../../iaik/pkcs/pkcs7/EnvelopedData.html#EnvelopedData(byte[], iaik.asn1.structures.AlgorithmID)"><code>EnvelopedData(byte[]
 content, AlgorithmID contentEA)</code></a> constructor for supplying the content to
 be enveloped when creating an<code>
 EnvelopedData</code> object.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>obj</code> - the PKCS#7 <code>EnvelopedData</code> as ASN1Object</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../iaik/pkcs/PKCSParsingException.html" title="class in iaik.pkcs">PKCSParsingException</a></code> - if the object can not be parsed</dd></dl>
</li>
</ul>
<a name="EnvelopedData(java.io.InputStream)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>EnvelopedData</h4>
<pre>public&nbsp;EnvelopedData(java.io.InputStream&nbsp;is)
              throws <a href="../../../iaik/pkcs/PKCSParsingException.html" title="class in iaik.pkcs">PKCSParsingException</a>,
                     java.io.IOException</pre>
<div class="block">Creates a new EnvelopedData where the DER encoded data is read from the
 given InputStream.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>is</code> - the InputStream holding a DER encoded PKCS#7 EnvelopedData object</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if an I/O error occurs during reading from the InputStream</dd>
<dd><code><a href="../../../iaik/pkcs/PKCSParsingException.html" title="class in iaik.pkcs">PKCSParsingException</a></code> - if an error occurs while parsing the object</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="decode(iaik.asn1.ASN1Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>decode</h4>
<pre>public&nbsp;void&nbsp;decode(<a href="../../../iaik/asn1/ASN1Object.html" title="class in iaik.asn1">ASN1Object</a>&nbsp;obj)
            throws <a href="../../../iaik/pkcs/PKCSParsingException.html" title="class in iaik.pkcs">PKCSParsingException</a></pre>
<div class="block">Decodes the given EnvelopedData ASN1 object.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../iaik/pkcs/pkcs7/Content.html#decode(iaik.asn1.ASN1Object)">decode</a></code>&nbsp;in interface&nbsp;<code><a href="../../../iaik/pkcs/pkcs7/Content.html" title="interface in iaik.pkcs.pkcs7">Content</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>obj</code> - the ASN1Object representing an already existing EnvelopedData
          object</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../iaik/pkcs/PKCSParsingException.html" title="class in iaik.pkcs">PKCSParsingException</a></code> - if an error occurs when parsing the given ASN1Object</dd></dl>
</li>
</ul>
<a name="decode(java.io.InputStream)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>decode</h4>
<pre>public&nbsp;void&nbsp;decode(java.io.InputStream&nbsp;is)
            throws java.io.IOException,
                   <a href="../../../iaik/pkcs/PKCSParsingException.html" title="class in iaik.pkcs">PKCSParsingException</a></pre>
<div class="block">Reads and decodes the EnvelopedData from a DerInputStream. If the supplied
 InputStream actually is not an instance of <a href="../../../iaik/asn1/DerInputStream.html" title="class in iaik.asn1"><code>DerInputStream</code></a>, internally a DerInputStream is created before parsing the
 data.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../iaik/pkcs/pkcs7/ContentStream.html#decode(java.io.InputStream)">decode</a></code>&nbsp;in interface&nbsp;<code><a href="../../../iaik/pkcs/pkcs7/ContentStream.html" title="interface in iaik.pkcs.pkcs7">ContentStream</a></code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html#decode(java.io.InputStream)">decode</a></code>&nbsp;in class&nbsp;<code><a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html" title="class in iaik.pkcs.pkcs7">EnvelopedDataStream</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>is</code> - the InputStream holding a DER encoded PKCS#7 EnvelopedData object</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - if an I/O error occurs during reading from the InputStream</dd>
<dd><code><a href="../../../iaik/pkcs/PKCSParsingException.html" title="class in iaik.pkcs">PKCSParsingException</a></code> - if an error occurs while parsing the object</dd></dl>
</li>
</ul>
<a name="setupCipher(java.security.PrivateKey, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setupCipher</h4>
<pre>public&nbsp;void&nbsp;setupCipher(java.security.PrivateKey&nbsp;recipientPrivateKey,
               int&nbsp;recipientInfoIndex)
                 throws <a href="../../../iaik/pkcs/PKCSException.html" title="class in iaik.pkcs">PKCSException</a>,
                        java.security.NoSuchAlgorithmException,
                        java.security.InvalidKeyException</pre>
<div class="block">Uses the specified private key to setup the Cipher for decrypting the
 content-encryption key and subsequently using it to decrypt the encrypted
 content of this<code>
 EnvelopedData</code> object for the requesting recipient, specified by its
 <code>recipientInfoIndex</code>.
 <p>
 This method first uses the given private key for decrypting the encrypted
 temporary symmetric key obtained from the corresponding
 <code>RecipientInfo</code> structure, and subsequently uses this key for
 decrypting the encrypted content.
 <p>
 Unlike the stream supporting <a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html" title="class in iaik.pkcs.pkcs7"><code>EnvelopedDataStream</code></a> class where the <code>setupCipher</code> method only
 initializes the cipher for decryption, whole the encrypted-content
 decryption already is performed inside the <code>setupCipher</code> method
 of this class.
 <p>
 <b>Attention!</b> This method only can be used when the content encryption
 AlgorithmID contains IV parameters encoded as an OCTET_STRING. When the
 algorithmID contains parameters of other type (e.g. S/MIME RC2-CBC
 parameters) they have to be decoded separately, and the
 <a href="../../../iaik/pkcs/pkcs7/EncryptedContentInfo.html#setupCipher(java.security.Key, java.security.spec.AlgorithmParameterSpec)"><code>setupCipher(Key key, AlgorithmParameterSpec)</code></a> method of the
 <a href="../../../iaik/pkcs/pkcs7/EncryptedContentInfo.html" title="class in iaik.pkcs.pkcs7"><code>EncryptedContentInfo</code></a> class has
 to be used to setup the cipher for content decryption, e.g.:
 
 <pre>
 //get the ECI from the enveloped data:
 EncryptedContentInfo eci =
      (EncryptedContentInfo)enveloped_data.getEncryptedContentInfo();
 // get the recipient infos
 RecipientInfo[] recipients = enveloped_data.getRecipientInfos();
 // use the specific recipient's private key for decrypting the required
 // symmetric content encryption key, e.g.:
 SecretKey secretKey =
   recipient_infos[0].decryptKey(recipientPrivateKey)
 //get the content encryption algorithm:
 AlgorithmID contentEA = eci.getContentEncryptionAlgorithm();
 // get the parameters as SEQUENCE
 SEQUENCE seq = (SEQUENCE)contentEA.getParameter();
 // the iv is the second component
 OCTET_STRING oct = (OCTET_STRING)seq.getComponentAt(1);
 // create an IvParameterSpec:
 IvParameterSpec ivSpec = new IvParameterSpec(oct.getValue());
 //now setup the cipher with previously decrypted recipient key and params
 eci.setupCipher(secretKey, ivSpec);
 //get the recovered raw data:
 byte[] data = EncryptedContentInfo.getContent();
 </pre>
 <p></div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html#setupCipher(java.security.PrivateKey, int)">setupCipher</a></code>&nbsp;in class&nbsp;<code><a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html" title="class in iaik.pkcs.pkcs7">EnvelopedDataStream</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>recipientPrivateKey</code> - the private key of one recipient specified in a RecipientInfo
          object</dd><dd><code>recipientInfoIndex</code> - specifies which RecipientInfo the private key belongs to</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../iaik/pkcs/PKCSException.html" title="class in iaik.pkcs">PKCSException</a></code> - if there occurs an error while decrypting the data</dd>
<dd><code>java.security.NoSuchAlgorithmException</code> - if there is no implementation of the content-encryption
              algorithm</dd>
<dd><code>java.security.InvalidKeyException</code> - if the specified private key is not valid</dd></dl>
</li>
</ul>
<a name="setupCipher(java.security.Key)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setupCipher</h4>
<pre>public&nbsp;void&nbsp;setupCipher(java.security.Key&nbsp;key)
                 throws <a href="../../../iaik/pkcs/PKCSException.html" title="class in iaik.pkcs">PKCSException</a>,
                        java.security.NoSuchAlgorithmException,
                        java.security.InvalidKeyException</pre>
<div class="block">Uses the given symmetric key to setup the cipher for decrypting the
 content.
 <p>
 Unlike the stream supporting <a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html" title="class in iaik.pkcs.pkcs7"><code>EnvelopedDataStream</code></a> class where the <code>setupCipher</code> method only
 initializes the cipher for decryption, whole the encrypted-content
 decryption already is performed inside the <code>setupCipher</code> method
 of this class.
 <p>
 <b>Attention!</b> This method only can be used when the content encryption
 AlgorithmID contains IV parameters encoded as an OCTET_STRING. When the
 algorithmID contains parameters of other type (e.g. S/MIME RC2-CBC
 parameters) they have to be decoded separately, and the
 <a href="../../../iaik/pkcs/pkcs7/EncryptedContentInfo.html#setupCipher(java.security.Key, java.security.spec.AlgorithmParameterSpec)"><code>setupCipher(Key key, AlgorithmParameterSpec)</code></a> method of the
 <a href="../../../iaik/pkcs/pkcs7/EncryptedContentInfo.html" title="class in iaik.pkcs.pkcs7"><code>EncryptedContentInfo</code></a> class has
 to be used to setup the cipher for content decryption, e.g.:
 
 <pre>
 // get the ECI from the enveloped data:
 EncryptedContentInfo eci = (EncryptedContentInfo) enveloped_data
     .getEncryptedContentInfo();
 // get the content encryption algorithm:
 AlgorithmID contentEA = eci.getContentEncryptionAlgorithm();
 // get the parameters as SEQUENCE
 SEQUENCE seq = (SEQUENCE) contentEA.getParameter();
 // the iv is the second component
 OCTET_STRING oct = (OCTET_STRING) seq.getComponentAt(1);
 // create an IvParameterSpec:
 IvParameterSpec ivSpec = new IvParameterSpec(oct.getValue());
 // now setup the cipher with previously decrypted recipient key and params
 eci.setupCipher(secretKey, ivSpec);
 // get the recovered raw data:
 byte[] data = EncryptedContentInfo.getContent();
 </pre></div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html#setupCipher(java.security.Key)">setupCipher</a></code>&nbsp;in class&nbsp;<code><a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html" title="class in iaik.pkcs.pkcs7">EnvelopedDataStream</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - the temporary symmetric key that has been used to encrypt the
          content, and now is used for decrypting it again</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../iaik/pkcs/PKCSException.html" title="class in iaik.pkcs">PKCSException</a></code> - if there occurs an error while decrypting the data</dd>
<dd><code>java.security.NoSuchAlgorithmException</code> - if there is no implementation for the content-encryption
              algorithm</dd>
<dd><code>java.security.InvalidKeyException</code> - if the specified private key is not valid</dd></dl>
</li>
</ul>
<a name="getInputStream()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInputStream</h4>
<pre>public&nbsp;java.io.InputStream&nbsp;getInputStream()</pre>
<div class="block">Returns an InputStream for reading the content.
 <p>
 The returned content depends on whether creating a new EnvelopedData or
 parsing an existing one:
 <ul>
 <li>When creating a new EnvelopedData:<br>
 If the content yet has not been encrypted, the plain content is returned
 <li>When parsing an existing EnvelopedData:<br>
 If the content yet has not been decrypted, the encrypted content is
 returned
 </ul>
 This method only overrides the corresponding <code>getInputStream</code>
 method of the parent <a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html" title="class in iaik.pkcs.pkcs7"><code>EnvelopedDataStream</code></a> class for returning the content of this
 <code>EnvelopedData</code> object. There should be no real necessity for
 using this method since the content bytes immediately can be obtained by
 the <a href="../../../iaik/pkcs/pkcs7/EnvelopedData.html#getContent()"><code>getContent</code></a> method. However, in contrast to the
 equivalent <code>getInputStream</code> method of the parent
 <code>EnvelopedDataStream</code> class, this method may be called
 arbitrarily often; it only returns a ByteArrayInputStream that is
 initialized with the content bytes.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html#getInputStream()">getInputStream</a></code>&nbsp;in class&nbsp;<code><a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html" title="class in iaik.pkcs.pkcs7">EnvelopedDataStream</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>an InputStream holding the content</dd></dl>
</li>
</ul>
<a name="getContent()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getContent</h4>
<pre>public&nbsp;byte[]&nbsp;getContent()</pre>
<div class="block">Returns the content as byte array.
 
 <p>
 The returned content depends on whether creating a new EnvelopedData or
 parsing an existing one:
 <ul>
 <li>When creating a new EnvelopedData:<br>
 If the content yet has not been encrypted, the plain content is returned
 <li>When parsing an existing EnvelopedData:<br>
 If the content yet has not been decrypted, the encrypted content is
 returned
 </ul></div>
<dl><dt><span class="strong">Returns:</span></dt><dd>a byte array holding the content</dd></dl>
</li>
</ul>
<a name="getEncryptedContentInfo()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEncryptedContentInfo</h4>
<pre>public&nbsp;java.lang.Object&nbsp;getEncryptedContentInfo()</pre>
<div class="block">Returns the encrypted content info included in this
 <code>EnvelopedData</code> object. When calling this method for obtaining
 the inherent <code>EncryptedContentInfo</code> an explicit cast to
 <code>EncryptedContentInfo</code> has to be made:
 
 <pre>
 EncryptedContentInfo eci = (EncryptedContentInfo) enveloped_data
     .getEncryptedContentInfo();
 </pre></div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html#getEncryptedContentInfo()">getEncryptedContentInfo</a></code>&nbsp;in class&nbsp;<code><a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html" title="class in iaik.pkcs.pkcs7">EnvelopedDataStream</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the encrypted content info</dd></dl>
</li>
</ul>
<a name="toASN1Object(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toASN1Object</h4>
<pre>protected&nbsp;<a href="../../../iaik/asn1/ASN1Object.html" title="class in iaik.asn1">ASN1Object</a>&nbsp;toASN1Object(int&nbsp;blockSize)
                           throws <a href="../../../iaik/pkcs/PKCSException.html" title="class in iaik.pkcs">PKCSException</a></pre>
<div class="block">Returns this EnvelopedData as ASN1Object. If <blockSize> is positive a
 constructed OCTET STRING is used for encoding the encrypted content. This
 method also will perform the encryption of the symmetric content-encryption
 key for each participated recipient.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html#toASN1Object(int)">toASN1Object</a></code>&nbsp;in class&nbsp;<code><a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html" title="class in iaik.pkcs.pkcs7">EnvelopedDataStream</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>blockSize</code> - the block size defining the encoding scheme - and specifying the
          length of each primitive encoded octet string component, if
          positive</dd>
<dt><span class="strong">Returns:</span></dt><dd>this PKCS#7 <code>EnvelopedData</code> as ASN1Object</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../iaik/pkcs/PKCSException.html" title="class in iaik.pkcs">PKCSException</a></code> - if the ASN1Object could not be created</dd></dl>
</li>
</ul>
<a name="getEncoded()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEncoded</h4>
<pre>public&nbsp;byte[]&nbsp;getEncoded()
                  throws <a href="../../../iaik/pkcs/PKCSException.html" title="class in iaik.pkcs">PKCSException</a></pre>
<div class="block">Returns the DER encoding of this EnvelopedData in a byte array.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>a byte array holding the DER encoding of this EnvelopedData</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../iaik/pkcs/PKCSException.html" title="class in iaik.pkcs">PKCSException</a></code></dd></dl>
</li>
</ul>
<a name="toString(boolean)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;java.lang.String&nbsp;toString(boolean&nbsp;detailed)</pre>
<div class="block">Returns a string giving some - if requested - detailed information about
 this <code>EnvelopedData</code> object.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../iaik/pkcs/pkcs7/ContentStream.html#toString(boolean)">toString</a></code>&nbsp;in interface&nbsp;<code><a href="../../../iaik/pkcs/pkcs7/ContentStream.html" title="interface in iaik.pkcs.pkcs7">ContentStream</a></code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html#toString(boolean)">toString</a></code>&nbsp;in class&nbsp;<code><a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html" title="class in iaik.pkcs.pkcs7">EnvelopedDataStream</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>detailed</code> - - whether or not to give detailed information</dd>
<dt><span class="strong">Returns:</span></dt><dd>the string representation</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><em>
					
					
			<small>This Javadoc may contain text parts from IETF Internet Standard specifications (see <a href=../../../RefCopyright_javadoc.html#RFC>copyright</a> note) and RSA Data Security Public-Key Cryptography Standards (PKCS, see <a href=../../../RefCopyright_javadoc.html#PKCS>copyright</a> note).</small>
			
		
				</em></div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../iaik/pkcs/pkcs7/EncryptedDataStream.html" title="class in iaik.pkcs.pkcs7"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../iaik/pkcs/pkcs7/EnvelopedDataStream.html" title="class in iaik.pkcs.pkcs7"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?iaik/pkcs/pkcs7/EnvelopedData.html" target="_top">Frames</a></li>
<li><a href="EnvelopedData.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#fields_inherited_from_class_iaik.pkcs.pkcs7.EnvelopedDataStream">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>
					
			
			<table cellpadding=10>
			<tr>
				<td align=left>
					<img src=../../../siclogo.jpg>
					</td>
					<td align=center>
						5.3<br>
						(c) 2002 
						<a href=http://jce.iaik.tugraz.at/ target=_blank>IAIK</a>, (c) 2003 - 2015 
						<a href=http://jce.iaik.tugraz.at/ target=_blank>SIC</a>
						</td>
						<td align=right>
							<img src=../../../iaik_logo.gif>
							</td>
						</tr>
					</table>
			
		
				</small></p>
</body>
</html>
